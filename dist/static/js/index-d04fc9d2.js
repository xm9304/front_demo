import{U as e,V as a,eI as t,eJ as i,ey as l,d as n,u as o,a as s,eE as d,eK as c,e as u,H as r,eL as p,f,o as m,c as _,h as v,w as y,k as h,F as g,t as w,i as k,q as x,P as C,v as j,N as I,$ as M,a0 as F,M as b,S as L,s as N,p as T,l as S,g as q,n as B}from"./index-ed1c2c55.js";import{f as V,i as P}from"./file-map-2a15779f.js";import{a as R}from"./index.es-a1d8afd5.js";/* empty css               */import $ from"./FileNavPath-4729db6a.js";import E from"./FileGrid-1bd1b69c.js";import U from"./FileList-fe386029.js";import z from"./index-13769572.js";import G from"./index-4600ba1a.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-7b0cbfec.js";import J from"./index-dbb87b1e.js";import"./FileImg-0cbe8eea.js";import"./FileRightMenu-9e6d167e.js";function K(e,a){const n=document.createElement("div");document.body.appendChild(n);const o=t(e,{...a,onClose:()=>{setTimeout((()=>{o.unmount(),document.body.removeChild(n)}),350)}});o.use(i),o.use(l),o.mount(n)}const W=e=>(T("data-v-582848c3"),e=e(),S(),e),X={class:"file-main"},Y=W((()=>q("span",null,"上传文件",-1))),Z=W((()=>q("span",null,"上传文件夹",-1))),A=B(n({__name:"index",setup(t){var i;const l=o(),n=s(),{width:T}=d(),S=c(),q=u(!1),B=u([]),W=u("0");W.value=(null==(i=l.query.fileType)?void 0:i.toString())||"0";const A=async()=>{try{q.value=!0,D.value=!1;const i=await(t={fileType:W.value},e.get(`${a}/file/list`,t));B.value=i.data.list}catch(i){return i}finally{q.value=!1}var t};r((()=>{A()})),p((e=>{var a;e.query.fileType&&(W.value=null==(a=e.query.fileType)?void 0:a.toString(),A())}));const D=u(!1),O=e=>{if(b.success(`点击了文件-${e.name}`),P.includes(e.extendName)&&e.src){const a=B.value.filter((e=>P.includes(e.extendName))).map((e=>e.src||"")),t=a.findIndex((a=>a===e.src));a.length&&R({options:{initialViewIndex:t},images:a})}"mp4"===e.extendName&&K(H,{fileInfo:e}),"mp3"===e.extendName&&function(e){K(J,{fileInfo:e})}(e)},Q=e=>{S.addSelectedFileItem(e)},ee=(e,a)=>{b.success("点击了"+e),"delete"===e&&L.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),"rename"===e&&K(G,{fileInfo:a}),"move"===e&&function(e){K(z,{fileInfo:e})}(a),"detail"===e&&n.push({path:"/file/detail"})},ae=()=>{L.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,a)=>{const t=f("icon-upload"),i=f("a-button"),l=N,n=f("a-doption"),o=f("a-dropdown"),s=f("a-option"),d=f("a-select"),c=f("a-input"),u=f("icon-search"),r=f("a-input-group"),p=f("a-space"),b=f("icon-delete"),L=f("icon-select-all"),P=f("icon-swap"),R=f("a-tooltip"),z=f("icon-filter"),G=f("icon-apps"),H=f("icon-list"),J=f("a-button-group"),K=f("a-row"),W=f("a-empty"),A=f("a-spin");return m(),_("div",X,[v($),v(K,{justify:"space-between",class:"row-operate"},{default:y((()=>[v(p,null,{default:y((()=>[v(o,null,{content:y((()=>[v(n,null,{icon:y((()=>[v(l,{name:"upload-file"})])),default:y((()=>[Y])),_:1}),v(n,null,{icon:y((()=>[v(l,{name:"upload-folder"})])),default:y((()=>[Z])),_:1})])),default:y((()=>[v(i,{type:"primary",shape:"round"},{icon:y((()=>[v(t)])),default:y((()=>[h("上传")])),_:1})])),_:1}),v(r,null,{default:y((()=>[v(d,{style:{width:"150px"},placeholder:"请选择"},{default:y((()=>[(m(!0),_(g,null,w(k(V),(e=>(m(),x(s,{key:e.value},{icon:y((()=>[(m(),x(C(e.icon),{size:"18",color:"#999"}))])),default:y((()=>[h(j(e.name),1)])),_:2},1024)))),128))])),_:1}),v(c,{placeholder:"请输入关键词...","allow-clear":""}),v(i,{type:"primary"},{icon:y((()=>[v(u)])),default:y((()=>[h("搜索")])),_:1})])),_:1})])),_:1}),k(T)>715?(m(),x(p,{key:0},{default:y((()=>[k(D)?(m(),x(i,{key:0,disabled:!k(S).selectedFileIdList.length,type:"primary",status:"danger",onClick:ae},{icon:y((()=>[v(b)])),_:1},8,["disabled"])):I("",!0),v(i,{type:"primary",onClick:a[0]||(a[0]=e=>D.value=!k(D))},{icon:y((()=>[v(L)])),default:y((()=>[h(j(k(D)?"取消批量":"批量操作"),1)])),_:1}),v(J,null,{default:y((()=>[v(R,{content:"传输列表",position:"bottom"},{default:y((()=>[v(i,{onClick:a[1]||(a[1]=e=>q.value=!k(q))},{icon:y((()=>[v(P)])),_:1})])),_:1}),v(R,{content:"排序",position:"bottom"},{default:y((()=>[v(i,null,{icon:y((()=>[v(z)])),_:1})])),_:1}),v(R,{content:"视图",position:"bottom"},{default:y((()=>[v(i,{onClick:k(S).changeViewMode},{icon:y((()=>["grid"===k(S).viewMode?(m(),x(G,{key:0})):(m(),x(H,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):I("",!0)])),_:1}),v(A,{class:"file-wrap",loading:k(q)},{default:y((()=>[M(v(E,{data:k(B),isBatchMode:k(D),selectedFileIdList:k(S).selectedFileIdList,onClick:O,onCheck:Q,onRightMenuClick:ee},null,8,["data","isBatchMode","selectedFileIdList"]),[[F,k(B).length&&"grid"==k(S).viewMode]]),M(v(U,{data:k(B),isBatchMode:k(D),onClick:O,onRightMenuClick:ee},null,8,["data","isBatchMode"]),[[F,k(B).length&&"list"==k(S).viewMode]]),M(v(W,null,null,512),[[F,!k(B).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-582848c3"]]);export{A as default};
