import{_ as e}from"./index-4149e2aa.js";import{d as l,e as a,z as d,r as t,eP as u,f as o,o as n,q as c,w as s,h as i,i as r,k as p,g as m,v as f,N as h,j as V,eQ as v,M as b}from"./index-e9ca0550.js";import{b as _,c as k}from"./index-024a230d.js";const y=l({__name:"AddMenuModal",props:{menus:{}},setup(l,{expose:y}){const x=l,w=a(),U=a(""),g=a(!1),I=d((()=>!!U.value)),j=d((()=>I.value?"编辑菜单":"新增菜单")),q=a(!1),A=t({type:1,icon:"",svgIcon:"",title:"",sort:0,status:1,path:"",component:"",keepAlive:!1,hidden:!0,parentId:"",redirect:"",breadcrumb:!0,affix:!0,alwaysShow:!1}),S=d((()=>u(A.path))),M={title:[{required:!0,message:"请输入菜单标题"}],path:[{required:!0,message:"请输入路由路径"}],component:[{required:!0,message:"请输入组件路径"}]},z=()=>{var e;null==(e=w.value)||e.resetFields()};y({add:()=>{U.value="",g.value=!0},edit:async e=>{U.value=e;const l=await _({id:e});Object.assign(A,l.data),v(A.path)&&(q.value=!0),g.value=!0}});const F=async()=>{try{return!!(await k(A)).data&&(b.success("模拟保存成功"),!0)}catch(e){return!1}};return(l,a)=>{const d=o("a-radio"),t=o("a-radio-group"),u=o("a-form-item"),v=o("a-tree-select"),b=e,_=o("icon-question-circle-fill"),k=o("a-tooltip"),y=o("a-col"),U=o("a-row"),N=o("a-input"),O=o("a-switch"),B=o("a-input-number"),C=o("a-form"),E=o("a-modal");return n(),c(E,{title:r(j),visible:r(g),"onUpdate:visible":a[17]||(a[17]=e=>V(g)?g.value=e:null),width:625,"mask-closable":!1,onBeforeOk:F,onClose:z},{default:s((()=>[i(C,{ref_key:"FormRef",ref:w,model:r(A),rules:M,"auto-label-width":""},{default:s((()=>[i(u,{label:"菜单类型",field:"type"},{default:s((()=>[i(t,{modelValue:r(A).type,"onUpdate:modelValue":a[0]||(a[0]=e=>r(A).type=e),type:"button",disabled:r(I)},{default:s((()=>[i(d,{value:1},{default:s((()=>[p("目录")])),_:1}),i(d,{value:2},{default:s((()=>[p("菜单")])),_:1})])),_:1},8,["modelValue","disabled"])])),_:1}),i(u,{label:"上级菜单",field:"parentId"},{default:s((()=>[i(v,{modelValue:r(A).parentId,"onUpdate:modelValue":a[1]||(a[1]=e=>r(A).parentId=e),placeholder:"请选择上级菜单","allow-clear":"","allow-search":"",disabled:r(I),data:x.menus,fieldNames:{key:"id",title:"title",children:"children"}},null,8,["modelValue","disabled","data"])])),_:1}),i(U,{gutter:16},{default:s((()=>[i(y,{span:12},{default:s((()=>[i(u,{label:"自定义图标",field:"svgIcon"},{default:s((()=>[i(b,{modelValue:r(A).svgIcon,"onUpdate:modelValue":a[2]||(a[2]=e=>r(A).svgIcon=e),type:"custom"},null,8,["modelValue"]),i(k,{content:"优先显示"},{default:s((()=>[i(_,{size:18,style:{color:"rgba(var(--warning-6))","margin-left":"8px"}})])),_:1})])),_:1})])),_:1}),i(y,{span:12},{default:s((()=>[i(u,{label:"菜单图标",field:"icon"},{default:s((()=>[i(b,{modelValue:r(A).icon,"onUpdate:modelValue":a[3]||(a[3]=e=>r(A).icon=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(u,{label:"菜单标题",field:"title"},{default:s((()=>[i(N,{modelValue:r(A).title,"onUpdate:modelValue":a[4]||(a[4]=e=>r(A).title=e),placeholder:"请输入菜单标题"},null,8,["modelValue"])])),_:1}),i(u,{label:"路由路径",field:"path"},{extra:s((()=>[m("div",null,"菜单名称由系统自动生成："+f(r(S)),1)])),default:s((()=>[i(N,{modelValue:r(A).path,"onUpdate:modelValue":a[5]||(a[5]=e=>r(A).path=e),placeholder:"请输入路由路径"},null,8,["modelValue"])])),_:1}),1===r(A).type?(n(),c(u,{key:0,label:"重定向",field:"redirect"},{default:s((()=>[i(N,{modelValue:r(A).redirect,"onUpdate:modelValue":a[6]||(a[6]=e=>r(A).redirect=e),placeholder:"请输入重定向地址"},null,8,["modelValue"])])),_:1})):h("",!0),i(u,{label:"是否外链",field:"isExternalUrl"},{default:s((()=>[i(t,{modelValue:r(q),"onUpdate:modelValue":a[7]||(a[7]=e=>V(q)?q.value=e:null),type:"button"},{default:s((()=>[i(d,{value:!0},{default:s((()=>[p("是")])),_:1}),i(d,{value:!1},{default:s((()=>[p("否")])),_:1})])),_:1},8,["modelValue"])])),_:1}),2===r(A).type?(n(),c(u,{key:1,label:"组件路径",field:"component"},{default:s((()=>[r(q)?(n(),c(N,{key:0,modelValue:r(A).component,"onUpdate:modelValue":a[8]||(a[8]=e=>r(A).component=e),placeholder:"请输入组件路径"},null,8,["modelValue"])):(n(),c(N,{key:1,modelValue:r(A).component,"onUpdate:modelValue":a[9]||(a[9]=e=>r(A).component=e),placeholder:"请输入组件路径"},{prepend:s((()=>[p("@/views/")])),append:s((()=>[p(".vue")])),_:1},8,["modelValue"]))])),_:1})):h("",!0),i(U,{gutter:16},{default:s((()=>[i(y,{span:8},{default:s((()=>[i(u,{label:"状态",field:"status"},{default:s((()=>[i(O,{type:"round",modelValue:r(A).status,"onUpdate:modelValue":a[10]||(a[10]=e=>r(A).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1}),i(y,{span:8},{default:s((()=>[i(u,{label:"是否隐藏",field:"hidden"},{default:s((()=>[i(O,{type:"round",modelValue:r(A).hidden,"onUpdate:modelValue":a[11]||(a[11]=e=>r(A).hidden=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"隐藏","unchecked-text":"显示"},null,8,["modelValue"])])),_:1})])),_:1}),i(y,{span:8},{default:s((()=>[i(u,{label:"是否缓存",field:"keepAlive"},{default:s((()=>[i(O,{type:"round",modelValue:r(A).keepAlive,"onUpdate:modelValue":a[12]||(a[12]=e=>r(A).keepAlive=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"是","unchecked-text":"否"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(U,{gutter:16},{default:s((()=>[i(y,{span:8},{default:s((()=>[i(u,{label:"面包屑",field:"breadcrumb"},{default:s((()=>[i(O,{type:"round",modelValue:r(A).breadcrumb,"onUpdate:modelValue":a[13]||(a[13]=e=>r(A).breadcrumb=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})])),_:1}),i(y,{span:8},{default:s((()=>[1===r(A).type?(n(),c(u,{key:0,label:"总是显示",field:"alwaysShow"},{default:s((()=>[i(O,{type:"round",modelValue:r(A).alwaysShow,"onUpdate:modelValue":a[14]||(a[14]=e=>r(A).alwaysShow=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})):h("",!0),2===r(A).type?(n(),c(u,{key:1,label:"页签",field:"affix"},{default:s((()=>[i(O,{type:"round",modelValue:r(A).affix,"onUpdate:modelValue":a[15]||(a[15]=e=>r(A).affix=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1})])),_:1}),i(u,{label:"菜单排序",field:"sort"},{default:s((()=>[i(B,{modelValue:r(A).sort,"onUpdate:modelValue":a[16]||(a[16]=e=>r(A).sort=e),placeholder:"请输入菜单排序",min:1,mode:"button",style:{width:"120px"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","visible"])}}});export{y as _};
