import{u as e}from"./usePagination-1d0f56a7.js";import{e as a,X as t,M as s}from"./index-5cde9988.js";function n(n,l){const{formatResult:o,onSuccess:c,immediate:i,rowKey:u}=l||{},{pagination:r,setTotal:d}=e((()=>m())),v=a(!1),g=a([]),m=async()=>{try{v.value=!0;const e=await n({page:r.current,size:r.pageSize});g.value=o?o(e.data.records):e.data.records,d(e.data.total),c&&c()}catch(e){}finally{v.value=!1}};(i??!0)&&m();const p=a([]);return{loading:v,tableData:g,getTableData:m,search:()=>{p.value=[],r.onChange(1)},pagination:r,selectedKeys:p,select:e=>{p.value=e},selectAll:e=>{const a=u??"id";p.value=e?g.value.map((e=>e[a])):[]},handleDelete:async(e,a)=>{const n=async()=>{try{const t=await e();return t.success&&(s.success((null==a?void 0:a.successTip)||"删除成功！"),p.value=[],m()),t.success}catch(t){return!1}};if(!((null==a?void 0:a.showModal)??!0))return n();t.warning({title:(null==a?void 0:a.title)||"提示",content:(null==a?void 0:a.content)||"是否确认删除？",hideCancel:!1,maskClosable:!1,onBeforeOk:n})}}}export{n as u};
