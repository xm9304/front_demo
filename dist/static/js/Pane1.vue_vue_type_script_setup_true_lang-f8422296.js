import{e,d as a,a as t,r as l,R as i,f as n,o as s,c as o,i as r,j as c,s as d,w as u,g as p,O as m,h as g,l as f,F as y,v as _,x as v,S as h,M as k}from"./index-ca74321b.js";import{u as w}from"./usePagination-6c7bc0a4.js";import x from"./index-4f1d0807.js";import C from"./EditModal-91f73e1b.js";import{g as b}from"./index-ca7f25d1.js";import{S as z}from"./person-ff3306fc.js";const S={class:"data-pane"},j={class:"content"},V={class:"gi_table_box",style:{"padding-top":"8px"}},A=a({__name:"Pane1",setup(a){const A=t(),D=l({name:"",status:""}),{loading:E,tableData:O,getTableData:R,pagination:T,selectKeys:K,select:M,selectAll:F}=function(a,t){const{formatResult:l,onSuccess:i,immediate:n,rowKey:s}=t||{},{pagination:o,setTotal:r}=w((()=>u())),c=e(!1),d=e([]),u=async()=>{try{c.value=!0;const e=await a({page:o.current,size:o.pageSize});d.value=l?l(e.data.list):e.data.list,r(e.data.total),i&&i()}catch(e){}finally{c.value=!1}};(n??1)&&u();const p=e([]);return{loading:c,tableData:d,getTableData:u,pagination:o,selectKeys:p,select:e=>{p.value=e},selectAll:e=>{const a=s??"id";p.value=e?d.value.map((e=>e[a])):[]}}}((e=>b({...D,current:e.page,pageSize:e.size})),{immediate:!1,formatResult:e=>e.map((e=>({...e,isEdit:!1})))});i((()=>{R()}));const P=()=>{h.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{O.value=[]}})},U=e(),q=()=>{var e;null==(e=U.value)||e.add()},G=()=>{if(!K.value.length)return k.warning("请勾选数据");k.success("点击了导出")};return(e,a)=>{const t=n("a-card"),l=n("icon-plus"),i=n("a-button"),h=n("icon-delete"),w=n("icon-export"),b=n("a-space"),K=n("a-option"),I=n("a-select"),N=n("a-input"),W=n("icon-search"),B=n("a-input-group"),H=n("icon-refresh"),J=n("a-row"),L=n("a-table-column"),Q=n("a-progress"),X=n("a-tag"),Y=n("a-popconfirm"),Z=n("a-table");return s(),o("div",S,[r(c)()?m("",!0):(s(),d(t,{key:0,title:"数据分类",bordered:!1,class:"gi_card pane-left"},{default:u((()=>[p(x,{placeholder:"请输入搜索关键词",onNodeClick:a[0]||(a[0]=e=>r(T).onChange(1))})])),_:1})),p(t,{title:"数据列表",bordered:!1,"header-style":{display:"none"},class:"gi_card pane-right"},{default:u((()=>[g("div",j,[p(J,{justify:"space-between"},{default:u((()=>[p(b,{wrap:""},{default:u((()=>[p(i,{type:"primary",onClick:q},{icon:u((()=>[p(l)])),_:1}),p(i,{type:"primary",status:"danger",onClick:P},{icon:u((()=>[p(h)])),default:u((()=>[f("删除")])),_:1}),p(i,{type:"primary",status:"success",onClick:G},{icon:u((()=>[p(w)])),_:1})])),_:1}),p(b,null,{default:u((()=>[p(I,{modelValue:r(D).status,"onUpdate:modelValue":a[1]||(a[1]=e=>r(D).status=e),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:u((()=>[(s(!0),o(y,null,_(r(z),(e=>(s(),d(K,{key:e.value,value:e.value},{default:u((()=>[f(v(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),p(B,null,{default:u((()=>[p(N,{modelValue:r(D).name,"onUpdate:modelValue":a[2]||(a[2]=e=>r(D).name=e),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),p(i,{type:"primary",onClick:r(R)},{default:u((()=>[p(W)])),_:1},8,["onClick"])])),_:1}),p(i,{type:"primary",onClick:r(R)},{icon:u((()=>[p(H)])),_:1},8,["onClick"])])),_:1})])),_:1}),g("section",V,[p(Z,{"row-key":"id",size:"small",loading:r(E),bordered:{cell:!0},data:r(O),scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:r(T),onSelect:r(M),onSelectAll:r(F)},{columns:u((()=>[p(L,{title:"序号",width:68},{cell:u((e=>[f(v(e.rowIndex+1),1)])),_:1}),p(L,{title:"姓名","data-index":"name"}),p(L,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),p(L,{title:"比例",width:200},{cell:u((({record:e})=>{return[p(Q,{status:(a=e.proportion,a<30?"danger":a<60?"warning":"success"),percent:e.proportion/100},null,8,["status","percent"])];var a})),_:1}),p(L,{title:"状态",width:100,align:"center"},{cell:u((({record:e})=>[(s(!0),o(y,null,_(r(z),(a=>(s(),o(y,{key:a.value},[a.value===e.status?(s(),d(X,{key:0,size:"small",color:a.color},{default:u((()=>[f(v(a.name),1)])),_:2},1032,["color"])):m("",!0)],64)))),128))])),_:1}),p(L,{title:"创建时间","data-index":"createTime",width:180}),p(L,{title:"操作",width:200,align:"center",fixed:"right"},{cell:u((({record:e})=>[p(b,null,{default:u((()=>[p(i,{type:"primary",size:"mini",onClick:a=>{return t=e,void(null==(l=U.value)||l.edit(t.id));var t,l}},{default:u((()=>[f("修改")])),_:2},1032,["onClick"]),p(i,{size:"mini",onClick:a=>{return t=e,void A.push({path:"/data/detail",query:{id:t.id}});var t}},{default:u((()=>[f("详情")])),_:2},1032,["onClick"]),p(Y,{type:"warning",content:"您确定要删除该项吗?",onOk:a=>(e.id,k.success("删除成功"),void R())},{default:u((()=>[p(i,{type:"primary",status:"danger",size:"mini"},{default:u((()=>[f("删除")])),_:1})])),_:2},1032,["onOk"])])),_:2},1024)])),_:1})])),_:1},8,["loading","data","pagination","onSelect","onSelectAll"])])])])),_:1}),p(C,{ref_key:"EditModalRef",ref:U},null,512)])}}});export{A as _};
