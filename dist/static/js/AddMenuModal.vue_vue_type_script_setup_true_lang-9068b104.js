import{_ as e}from"./index-42b8a554.js";import{d as l,z as a,eQ as d,eP as t,e as u,r as o,eR as n,f as s,o as i,q as r,w as c,g as m,i as p,k as f,N as h,h as V,v as x,j as y,eS as v,M as b}from"./index-b26459cd.js";import{b as k,c as _}from"./index-54b76403.js";const w=V("span",null,"路由名称由系统自动生成：",-1),g=l({__name:"AddMenuModal",props:{menus:{default:()=>[]}},setup(l,{expose:g}){const U=l,I=a((()=>{const e=JSON.parse(JSON.stringify(U.menus)),l=d(e,(e=>[1,2].includes(e.type)));return t.mapTree(l,(e=>({id:e.id,title:e.title,children:e.children})))})),q=u(),S=u(""),j=u(!1),A=a((()=>!!S.value)),T=a((()=>A.value?"编辑菜单":"新增菜单")),N=u(!1),O=o({type:1,icon:"",svgIcon:"",title:"",sort:0,status:1,path:"",component:"",keepAlive:!1,hidden:!0,parentId:"",redirect:"",breadcrumb:!0,showInTabs:!0,alwaysShow:!1,permission:""}),J=a((()=>n(O.path))),M={parentId:[{required:!0,message:"请选择上级菜单"}],title:[{required:!0,message:"请输入菜单标题"}],path:[{required:!0,message:"请输入路由路径"}],component:[{required:!0,message:"请输入组件路径"}],permission:[{required:!0,message:"请输入权限标识"}]},z=a((()=>{if([1,2].includes(O.type)){const{title:e,path:l}=M;return{title:e,path:l}}if(3===O.type){const{parentId:e,title:l,permission:a}=M;return{parentId:e,title:l,permission:a}}})),C=()=>{var e;null==(e=q.value)||e.clearValidate()},F=()=>{var e;null==(e=q.value)||e.resetFields()};g({add:()=>{S.value="",j.value=!0},edit:async e=>{S.value=e;const l=await k({id:e});Object.assign(O,l.data),v(O.path)&&(N.value=!0),j.value=!0}});const R=async()=>{var e;try{if(await(null==(e=q.value)?void 0:e.validate()))return!1;return!!(await _(O)).data&&(b.success("模拟保存成功"),!0)}catch(l){return!1}};return(l,a)=>{const d=s("a-radio"),t=s("a-radio-group"),u=s("a-form-item"),o=s("a-tree-select"),n=e,v=s("icon-question-circle-fill"),b=s("a-tooltip"),k=s("a-col"),_=s("a-row"),g=s("a-input"),U=s("a-tag"),S=s("a-switch"),M=s("a-input-number"),B=s("a-form"),E=s("a-modal");return i(),r(E,{visible:p(j),"onUpdate:visible":a[18]||(a[18]=e=>y(j)?j.value=e:null),title:p(T),width:"90%","modal-style":{maxWidth:"625px"},"mask-closable":!1,onBeforeOk:R,onClose:F},{default:c((()=>[m(B,{ref_key:"FormRef",ref:q,model:p(O),rules:p(z),"auto-label-width":""},{default:c((()=>[m(u,{label:"菜单类型",field:"type"},{default:c((()=>[m(t,{modelValue:p(O).type,"onUpdate:modelValue":a[0]||(a[0]=e=>p(O).type=e),type:"button",disabled:p(A),onChange:C},{default:c((()=>[m(d,{value:1},{default:c((()=>[f("目录")])),_:1}),m(d,{value:2},{default:c((()=>[f("菜单")])),_:1}),m(d,{value:3},{default:c((()=>[f("按钮")])),_:1})])),_:1},8,["modelValue","disabled"])])),_:1}),m(u,{label:"上级菜单",field:"parentId"},{default:c((()=>[m(o,{modelValue:p(O).parentId,"onUpdate:modelValue":a[1]||(a[1]=e=>p(O).parentId=e),placeholder:"请选择上级菜单","allow-clear":"","allow-search":"",disabled:p(A),data:p(I),fieldNames:{key:"id",title:"title",children:"children"}},null,8,["modelValue","disabled","data"])])),_:1}),[1,2].includes(p(O).type)?(i(),r(_,{key:0,gutter:16},{default:c((()=>[m(k,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12},{default:c((()=>[m(u,{label:"自定义图标",field:"svgIcon"},{default:c((()=>[m(n,{modelValue:p(O).svgIcon,"onUpdate:modelValue":a[2]||(a[2]=e=>p(O).svgIcon=e),type:"custom"},null,8,["modelValue"]),m(b,{content:"优先显示"},{default:c((()=>[m(v,{size:18,style:{color:"rgba(var(--warning-6))","margin-left":"8px"}})])),_:1})])),_:1})])),_:1}),m(k,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12},{default:c((()=>[m(u,{label:"菜单图标",field:"icon"},{default:c((()=>[m(n,{modelValue:p(O).icon,"onUpdate:modelValue":a[3]||(a[3]=e=>p(O).icon=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):h("",!0),m(u,{label:"菜单标题",field:"title"},{default:c((()=>[m(g,{modelValue:p(O).title,"onUpdate:modelValue":a[4]||(a[4]=e=>p(O).title=e),placeholder:"请输入菜单标题","allow-clear":""},null,8,["modelValue"])])),_:1}),[1,2].includes(p(O).type)?(i(),r(u,{key:1,label:"路由路径",field:"path"},{extra:c((()=>[V("div",null,[w,p(J)?(i(),r(U,{key:0},{default:c((()=>[f(x(p(J)),1)])),_:1})):h("",!0)])])),default:c((()=>[m(g,{modelValue:p(O).path,"onUpdate:modelValue":a[5]||(a[5]=e=>p(O).path=e),placeholder:"请输入路由路径","allow-clear":""},null,8,["modelValue"])])),_:1})):h("",!0),[1,2].includes(p(O).type)&&!p(N)?(i(),r(u,{key:2,label:"重定向",field:"redirect"},{default:c((()=>[m(g,{modelValue:p(O).redirect,"onUpdate:modelValue":a[6]||(a[6]=e=>p(O).redirect=e),placeholder:"请输入重定向地址","allow-clear":""},null,8,["modelValue"])])),_:1})):h("",!0),[1,2].includes(p(O).type)?(i(),r(u,{key:3,label:"是否外链",field:"isExternalUrl"},{default:c((()=>[m(t,{modelValue:p(N),"onUpdate:modelValue":a[7]||(a[7]=e=>y(N)?N.value=e:null),type:"button"},{default:c((()=>[m(d,{value:!0},{default:c((()=>[f("是")])),_:1}),m(d,{value:!1},{default:c((()=>[f("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),2===p(O).type?(i(),r(u,{key:4,label:"组件路径",field:"component"},{default:c((()=>[p(N)?(i(),r(g,{key:0,modelValue:p(O).component,"onUpdate:modelValue":a[8]||(a[8]=e=>p(O).component=e),placeholder:"请输入组件路径"},null,8,["modelValue"])):(i(),r(g,{key:1,modelValue:p(O).component,"onUpdate:modelValue":a[9]||(a[9]=e=>p(O).component=e),placeholder:"请输入组件路径"},{prepend:c((()=>[f("@/views/")])),append:c((()=>[f(".vue")])),_:1},8,["modelValue"]))])),_:1})):h("",!0),[1,2].includes(p(O).type)?(i(),r(_,{key:5,gutter:16},{default:c((()=>[m(k,{xs:12,sm:12,md:8,lg:8,xl:8,xxl:8},{default:c((()=>[m(u,{label:"状态",field:"status"},{default:c((()=>[m(S,{type:"round",modelValue:p(O).status,"onUpdate:modelValue":a[10]||(a[10]=e=>p(O).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1}),m(k,{xs:12,sm:12,md:8,lg:8,xl:8,xxl:8},{default:c((()=>[m(u,{label:"是否隐藏",field:"hidden"},{default:c((()=>[m(S,{type:"round",modelValue:p(O).hidden,"onUpdate:modelValue":a[11]||(a[11]=e=>p(O).hidden=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"是","unchecked-text":"否"},null,8,["modelValue"])])),_:1})])),_:1}),m(k,{xs:12,sm:12,md:8,lg:8,xl:8,xxl:8},{default:c((()=>[m(u,{label:"是否缓存",field:"keepAlive"},{default:c((()=>[m(S,{type:"round",modelValue:p(O).keepAlive,"onUpdate:modelValue":a[12]||(a[12]=e=>p(O).keepAlive=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"是","unchecked-text":"否"},null,8,["modelValue"])])),_:1})])),_:1}),m(k,{xs:12,sm:12,md:8,lg:8,xl:8,xxl:8},{default:c((()=>[m(u,{label:"面包屑",field:"breadcrumb"},{default:c((()=>[m(S,{type:"round",modelValue:p(O).breadcrumb,"onUpdate:modelValue":a[13]||(a[13]=e=>p(O).breadcrumb=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})])),_:1}),m(k,{xs:12,sm:12,md:8,lg:8,xl:8,xxl:8},{default:c((()=>[1===p(O).type?(i(),r(u,{key:0,label:"总是显示",field:"alwaysShow"},{default:c((()=>[m(S,{type:"round",modelValue:p(O).alwaysShow,"onUpdate:modelValue":a[14]||(a[14]=e=>p(O).alwaysShow=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})):h("",!0),2===p(O).type?(i(),r(u,{key:1,label:"页签显示",field:"showInTabs"},{default:c((()=>[m(S,{type:"round",modelValue:p(O).showInTabs,"onUpdate:modelValue":a[15]||(a[15]=e=>p(O).showInTabs=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1})])),_:1})):h("",!0),3===p(O).type?(i(),r(u,{key:6,label:"权限标识",field:"permission"},{default:c((()=>[m(g,{modelValue:p(O).permission,"onUpdate:modelValue":a[16]||(a[16]=e=>p(O).permission=e),placeholder:"sys:btn:add","allow-clear":""},null,8,["modelValue"])])),_:1})):h("",!0),m(u,{label:"菜单排序",field:"sort"},{default:c((()=>[m(M,{modelValue:p(O).sort,"onUpdate:modelValue":a[17]||(a[17]=e=>p(O).sort=e),placeholder:"请输入菜单排序",min:1,mode:"button",style:{width:"120px"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible","title"])}}});export{g as _};
