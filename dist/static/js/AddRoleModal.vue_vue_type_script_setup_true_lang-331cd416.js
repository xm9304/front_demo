import{d as e,e as a,z as l,r as t,f as d,o as s,q as o,w as u,h as n,i,j as m,M as c}from"./index-08a0f512.js";import{e as r,f as p}from"./index-eaa7f9a9.js";const f=e({__name:"AddRoleModal",setup(e,{expose:f}){const h=a(""),v=l((()=>h.value?"编辑角色":"新增角色")),V=a(!1),b=t({name:"",code:"",status:1,description:""}),x={name:[{required:!0,message:"请输入角色名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],code:[{required:!0,message:"请输入角色编号"}],status:[{required:!0}]};f({add:()=>{h.value="",V.value=!0},edit:async e=>{h.value=e;const a=await r({id:e});Object.assign(b,a.data),V.value=!0}});const _=async()=>{try{return!!(await p(b)).data&&(c.success("模拟保存成功"),!0)}catch(e){return!1}};return(e,a)=>{const l=d("a-input"),t=d("a-form-item"),c=d("a-textarea"),r=d("a-switch"),p=d("a-form"),f=d("a-modal");return s(),o(f,{visible:i(V),"onUpdate:visible":a[4]||(a[4]=e=>m(V)?V.value=e:null),title:i(v),"mask-closable":!1,onBeforeOk:_},{default:u((()=>[n(p,{model:i(b),rules:x,size:"medium","auto-label-width":""},{default:u((()=>[n(t,{label:"角色名称",name:"name",field:"name","validate-trigger":["change","input"]},{default:u((()=>[n(l,{placeholder:"请输入角色名称",modelValue:i(b).name,"onUpdate:modelValue":a[0]||(a[0]=e=>i(b).name=e)},null,8,["modelValue"])])),_:1}),n(t,{label:"角色编号",name:"code",field:"code"},{default:u((()=>[n(l,{placeholder:"请输入角色编号",modelValue:i(b).code,"onUpdate:modelValue":a[1]||(a[1]=e=>i(b).code=e)},null,8,["modelValue"])])),_:1}),n(t,{label:"描述",name:"description"},{default:u((()=>[n(c,{modelValue:i(b).description,"onUpdate:modelValue":a[2]||(a[2]=e=>i(b).description=e),placeholder:"角色描述","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])])),_:1}),n(t,{label:"状态",field:"status"},{default:u((()=>[n(r,{type:"round",modelValue:i(b).status,"onUpdate:modelValue":a[3]||(a[3]=e=>i(b).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{f as _};
