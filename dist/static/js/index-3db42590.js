import{_ as e}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-638630a6.js";import{_ as a}from"./PermModal.vue_vue_type_script_setup_true_lang-d1ebeb5a.js";import{d as l,r as t,e as i,f as n,o as s,c as d,g as o,w as r,i as u,l as c,y as p,t as m,R as _,j as f,h as y,M as g}from"./index-2db52125.js";import{u as v}from"./useTable-8dee650c.js";import{b as k,d as h}from"./role-49bfc33e.js";import"./useForm-0c10f8b9.js";import"./menu-3e9c4283.js";import"./usePagination-7054994b.js";const w={class:"gi_page role-manage"},b=y("span",null,"查询",-1),x=y("span",null,"重置",-1),C=y("span",null,"新增",-1),S=y("span",null,"删除",-1),j=y("span",null,"编辑",-1),M=y("span",null,"删除",-1),A=l({name:"SystemRole",__name:"index",setup(l){const y=t(),A=t(),R=i({name:"",status:""}),{loading:V,tableData:z,pagination:P,selectedKeys:B,search:D,select:O,selectAll:T,handleDelete:U}=v((e=>k({current:e.page,pageSize:e.size})),{immediate:!0}),q=()=>{R.status="",R.status="",D()},F=()=>{if(!B.value.length)return g.warning("请选择角色！");U((()=>h({ids:B.value})))},I=()=>{var e;null==(e=y.value)||e.add()};return(l,t)=>{const i=n("icon-search"),g=n("a-input"),v=n("a-option"),k=n("a-select"),K=n("a-button"),L=n("icon-refresh"),N=n("a-space"),W=n("icon-plus"),E=n("icon-delete"),G=n("a-row"),H=n("a-table-column"),J=n("a-tag"),Q=n("icon-edit"),X=n("icon-safe"),Y=n("a-popconfirm"),Z=n("a-table"),$=n("a-card");return s(),d("div",w,[o($,{title:"角色管理"},{default:r((()=>[o(N,{wrap:""},{default:r((()=>[o(g,{modelValue:u(R).name,"onUpdate:modelValue":t[0]||(t[0]=e=>u(R).name=e),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:r((()=>[o(i)])),_:1},8,["modelValue"]),o(k,{modelValue:u(R).status,"onUpdate:modelValue":t[1]||(t[1]=e=>u(R).status=e),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},{default:r((()=>[o(v,{value:1},{default:r((()=>[c("正常")])),_:1}),o(v,{value:0},{default:r((()=>[c("禁用")])),_:1})])),_:1},8,["modelValue"]),o(K,{type:"primary",onClick:u(D)},{icon:r((()=>[o(i)])),default:r((()=>[b])),_:1},8,["onClick"]),o(K,{onClick:q},{icon:r((()=>[o(L)])),default:r((()=>[x])),_:1})])),_:1}),o(G,null,{default:r((()=>[o(N,{wrap:""},{default:r((()=>[o(K,{type:"primary",onClick:I},{icon:r((()=>[o(W)])),default:r((()=>[C])),_:1}),o(K,{type:"primary",status:"danger",onClick:F},{icon:r((()=>[o(E)])),default:r((()=>[S])),_:1})])),_:1})])),_:1}),o(Z,{style:{"margin-top":"6px"},"row-key":"id",data:u(z),bordered:{cell:!0},loading:u(V),scroll:{x:"100%",y:"100%",minWidth:900},pagination:u(P),"row-selection":{type:"checkbox",showCheckedAll:!0},"selected-keys":u(B),onSelect:u(O),onSelectAll:u(T)},{columns:r((()=>[o(H,{title:"序号",width:64},{cell:r((e=>[c(p(e.rowIndex+1),1)])),_:1}),o(H,{title:"角色名称","data-index":"name"}),o(H,{title:"角色编码","data-index":"code"}),o(H,{title:"状态",width:100,align:"center"},{cell:r((({record:e})=>[1==e.status?(s(),m(J,{key:0,color:"green"},{default:r((()=>[c("正常")])),_:1})):_("",!0),0==e.status?(s(),m(J,{key:1,color:"red"},{default:r((()=>[c("禁用")])),_:1})):_("",!0)])),_:1}),o(H,{title:"描述","data-index":"description"}),o(H,{title:"创建时间","data-index":"createTime"}),o(H,{title:"操作",width:280,align:"center",fixed:u(f)()?void 0:"right"},{cell:r((({record:e})=>[o(N,null,{default:r((()=>[o(K,{type:"primary",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=y.value)||t.edit(l.id));var l,t}},{icon:r((()=>[o(Q)])),default:r((()=>[j])),_:2},1032,["disabled","onClick"]),o(K,{type:"primary",status:"success",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=A.value)||t.open({code:l.code,title:l.name}));var l,t}},{icon:r((()=>[o(X)])),default:r((()=>[c("分配权限")])),_:2},1032,["disabled","onClick"]),o(Y,{type:"warning",content:"确定删除该角色吗?",onBeforeOk:a=>{return l=e,U((()=>h({ids:[l.id]})),{showModal:!1});var l}},{default:r((()=>[o(K,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:r((()=>[o(E)])),default:r((()=>[M])),_:2},1032,["disabled"])])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination","selected-keys","onSelect","onSelectAll"]),o(e,{ref_key:"AddRoleModalRef",ref:y,onSaveSuccess:u(D)},null,8,["onSaveSuccess"]),o(a,{ref_key:"PermModalRef",ref:A},null,512)])),_:1})])}}});export{A as default};
