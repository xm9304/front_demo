import{d as e,e as a,B as l,r as d,f as t,o as s,t as o,w as i,g as u,i as m,k as r,M as n}from"./index-9e01b763.js";import{n as c,o as f}from"./index-0b93b7dc.js";const p=e({__name:"AddRoleModal",setup(e,{expose:p}){const v=a(),h=a(""),x=l((()=>!!h.value)),w=l((()=>x.value?"编辑角色":"新增角色")),b=a(!1),V=d({name:"",code:"",status:1,description:""}),_={name:[{required:!0,message:"请输入角色名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],code:[{required:!0,message:"请输入角色编码"},{match:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:"格式不对！只能英文开头，包含英文数字下划线"}],status:[{required:!0}]},g=()=>{var e;null==(e=v.value)||e.resetFields()};p({add:()=>{h.value="",b.value=!0},edit:async e=>{h.value=e;const a=await c({id:e});Object.assign(V,a.data),b.value=!0}});const k=async()=>{var e;try{if(await(null==(e=v.value)?void 0:e.validate()))return!1;return!!(await f(V)).data&&(n.success("模拟保存成功"),!0)}catch(a){return!1}};return(e,a)=>{const l=t("a-input"),d=t("a-form-item"),n=t("a-textarea"),c=t("a-switch"),f=t("a-form"),p=t("a-modal");return s(),o(p,{visible:m(b),"onUpdate:visible":a[4]||(a[4]=e=>r(b)?b.value=e:null),title:m(w),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:k,onClose:g},{default:i((()=>[u(f,{ref_key:"FormRef",ref:v,model:m(V),rules:_,size:"medium","auto-label-width":""},{default:i((()=>[u(d,{label:"角色名称",field:"name"},{default:i((()=>[u(l,{modelValue:m(V).name,"onUpdate:modelValue":a[0]||(a[0]=e=>m(V).name=e),modelModifiers:{trim:!0},placeholder:"请输入角色名称","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),u(d,{label:"角色编码",field:"code"},{default:i((()=>[u(l,{modelValue:m(V).code,"onUpdate:modelValue":a[1]||(a[1]=e=>m(V).code=e),modelModifiers:{trim:!0},placeholder:"请输入角色编码","allow-clear":"",disabled:m(x),"max-length":10},null,8,["modelValue","disabled"])])),_:1}),u(d,{label:"描述",field:"description"},{default:i((()=>[u(n,{modelValue:m(V).description,"onUpdate:modelValue":a[2]||(a[2]=e=>m(V).description=e),modelModifiers:{trim:!0},placeholder:"请填写描述","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:5}},null,8,["modelValue"])])),_:1}),u(d,{label:"状态",field:"status"},{default:i((()=>[u(c,{type:"round",modelValue:m(V).status,"onUpdate:modelValue":a[3]||(a[3]=e=>m(V).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{p as _};
