import{S as e,eO as a,eP as t,eB as l,d as i,u as n,a as o,eQ as s,r as d,J as c,eR as u,f as r,o as p,c as f,g as m,w as _,l as v,F as y,x as h,i as g,t as w,P as k,y as x,R as C,a2 as j,a3 as b,M as I,U as M,v as F,p as R,n as T,h as B,s as N}from"./index-25201ada.js";import{f as S,i as q}from"./file-2a15779f.js";import{a as P}from"./index.es-6f167d5f.js";/* empty css               */import V from"./FileNavPath-21f7267a.js";import L from"./FileGrid-9136fd01.js";import U from"./FileList-77ed10b4.js";import z from"./index-e208c5b7.js";import E from"./index-65d0aad0.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-20322b72.js";import J from"./index-ad2c96bb.js";import"./FileImg-dc21b102.js";import"./FileRightMenu-8ef79877.js";function K(e,i){const n=document.createElement("div");document.body.appendChild(n);const o=a(e,{...i,onClose:()=>{setTimeout((()=>{o.unmount(),document.body.removeChild(n),(null==i?void 0:i.callback)&&(null==i||i.callback())}),350)}});o.use(t),o.use(l),o.mount(n)}let O="";const Q=e=>(R("data-v-d81ce59e"),e=e(),T(),e),$={class:"file-main"},A=Q((()=>B("span",null,"上传文件",-1))),D=Q((()=>B("span",null,"上传文件夹",-1))),H=N(i({__name:"index",setup(a){var t;const l=n(),i=o(),R=s(),T=d(!1),B=d([]),N=d("0");N.value=(null==(t=l.query.fileType)?void 0:t.toString())||"0";const Q=async()=>{try{T.value=!0,H.value=!1;const t=await(a={fileType:N.value},e.get("/file/list",a));B.value=t.data.records}catch(t){return t}finally{T.value=!1}var a};c((()=>{Q()})),u((e=>{var a;e.query.fileType&&(N.value=null==(a=e.query.fileType)?void 0:a.toString(),Q())}));const H=d(!1),W=e=>{if(I.success(`点击了文件-${e.name}`),q.includes(e.extendName)&&e.src){const a=B.value.filter((e=>q.includes(e.extendName))).map((e=>e.src||"")),t=a.findIndex((a=>a===e.src));a.length&&P({options:{initialViewIndex:t},images:a})}"mp4"===e.extendName&&K(G,{fileInfo:e}),"mp3"===e.extendName&&function(e){if(!O)O=e.id,K(J,{fileInfo:e,callback:()=>{O=""}})}(e)},X=e=>{R.addSelectedFileItem(e)},Y=(e,a)=>{I.success("点击了"+e),"delete"===e&&M.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),"rename"===e&&K(E,{fileInfo:a}),"move"===e&&function(e){K(z,{fileInfo:e})}(a),"detail"===e&&i.push({path:"/file/detail"})},Z=()=>{M.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,a)=>{const t=r("icon-upload"),l=r("a-button"),i=F,n=r("a-doption"),o=r("a-dropdown"),s=r("a-option"),d=r("a-select"),c=r("a-input"),u=r("icon-search"),I=r("a-input-group"),M=r("a-space"),N=r("icon-delete"),q=r("icon-select-all"),P=r("icon-swap"),z=r("a-tooltip"),E=r("icon-filter"),G=r("icon-apps"),J=r("icon-list"),K=r("a-button-group"),O=r("a-row"),Q=r("a-empty"),ee=r("a-spin");return p(),f("div",$,[m(V),m(O,{justify:"space-between",class:"row-operate"},{default:_((()=>[m(M,{wrap:""},{default:_((()=>[m(o,null,{content:_((()=>[m(n,null,{icon:_((()=>[m(i,{name:"upload-file"})])),default:_((()=>[A])),_:1}),m(n,null,{icon:_((()=>[m(i,{name:"upload-folder"})])),default:_((()=>[D])),_:1})])),default:_((()=>[m(l,{type:"primary",shape:"round"},{icon:_((()=>[m(t)])),default:_((()=>[v("上传")])),_:1})])),_:1}),m(I,null,{default:_((()=>[m(d,{style:{width:"150px"},placeholder:"请选择"},{default:_((()=>[(p(!0),f(y,null,h(g(S),(e=>(p(),w(s,{key:e.value},{icon:_((()=>[(p(),w(k(e.icon),{size:"18",color:"#999"}))])),default:_((()=>[v(x(e.name),1)])),_:2},1024)))),128))])),_:1}),m(c,{placeholder:"请输入关键词...","allow-clear":""}),m(l,{type:"primary"},{icon:_((()=>[m(u)])),default:_((()=>[v("搜索")])),_:1})])),_:1})])),_:1}),m(M,{wrap:""},{default:_((()=>[g(H)?(p(),w(l,{key:0,disabled:!g(R).selectedFileIds.length,type:"primary",status:"danger",onClick:Z},{icon:_((()=>[m(N)])),_:1},8,["disabled"])):C("",!0),m(l,{type:"primary",onClick:a[0]||(a[0]=e=>H.value=!g(H))},{icon:_((()=>[m(q)])),default:_((()=>[v(x(g(H)?"取消批量":"批量操作"),1)])),_:1}),m(K,null,{default:_((()=>[m(z,{content:"传输列表",position:"bottom"},{default:_((()=>[m(l,{onClick:a[1]||(a[1]=e=>T.value=!g(T))},{icon:_((()=>[m(P)])),_:1})])),_:1}),m(z,{content:"排序",position:"bottom"},{default:_((()=>[m(l,null,{icon:_((()=>[m(E)])),_:1})])),_:1}),m(z,{content:"视图",position:"bottom"},{default:_((()=>[m(l,{onClick:g(R).changeViewMode},{icon:_((()=>["grid"===g(R).viewMode?(p(),w(G,{key:0})):(p(),w(J,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),m(ee,{class:"file-wrap",loading:g(T)},{default:_((()=>[j(m(L,{data:g(B),isBatchMode:g(H),selectedFileIds:g(R).selectedFileIds,onClick:W,onCheck:X,onRightMenuClick:Y},null,8,["data","isBatchMode","selectedFileIds"]),[[b,g(B).length&&"grid"==g(R).viewMode]]),j(m(U,{data:g(B),isBatchMode:g(H),onClick:W,onRightMenuClick:Y},null,8,["data","isBatchMode"]),[[b,g(B).length&&"list"==g(R).viewMode]]),j(m(Q,null,null,512),[[b,!g(B).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-d81ce59e"]]);export{H as default};
