import{d as e,r as a,B as l,f as t,o as s,t as u,w as d,g as o,i,k as r,M as m}from"./index-e7b4405a.js";import{a as n,b as c}from"./dict-9bc7f19d.js";import{u as f}from"./useForm-d27cc9da.js";const v=e({__name:"AddDictDataModal",setup(e,{expose:v}){const p=a(),h=a(""),_=l((()=>!!h.value)),b=l((()=>_.value?"编辑字典数据":"新增字典数据")),w=a(!1),g=a(!1),{form:x,resetForm:V}=f({name:"",value:"",status:1}),k={name:[{required:!0,message:"请输入字典名"}],value:[{required:!0,message:"请输入字典值"},{match:/^[a-zA-Z0-9_]*$/,message:"格式不对！只能包含英文数字下划线"}],status:[{required:!0}]},y=()=>{var e;null==(e=p.value)||e.resetFields(),V()};v({add:()=>{h.value="",w.value=!0},edit:async e=>{h.value=e.id,w.value=!0,g.value=!0;const a=await n(e);Object.assign(x,a.data),g.value=!1}});const j=async()=>{var e;try{if(await(null==(e=p.value)?void 0:e.validate()))return!1;return!!(await c(x)).data&&(m.success("模拟保存成功"),!0)}catch(a){return!1}};return(e,a)=>{const l=t("a-input"),m=t("a-form-item"),n=t("a-switch"),c=t("a-form"),f=t("a-spin"),v=t("a-modal");return s(),u(v,{visible:i(w),"onUpdate:visible":a[3]||(a[3]=e=>r(w)?w.value=e:null),title:i(b),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:j,onClose:y},{default:d((()=>[o(f,{loading:i(g),class:"w-full"},{default:d((()=>[o(c,{ref_key:"formRef",ref:p,model:i(x),rules:k,size:"medium","auto-label-width":""},{default:d((()=>[o(m,{label:"字典名",field:"name"},{default:d((()=>[o(l,{modelValue:i(x).name,"onUpdate:modelValue":a[0]||(a[0]=e=>i(x).name=e),modelModifiers:{trim:!0},placeholder:"请输入字典名","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),o(m,{label:"字典值",field:"value"},{default:d((()=>[o(l,{modelValue:i(x).value,"onUpdate:modelValue":a[1]||(a[1]=e=>i(x).value=e),modelModifiers:{trim:!0},placeholder:"请输入字典值","allow-clear":"","max-length":10},null,8,["modelValue"])])),_:1}),o(m,{label:"状态",field:"status"},{default:d((()=>[o(n,{type:"round",modelValue:i(x).status,"onUpdate:modelValue":a[2]||(a[2]=e=>i(x).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["loading"])])),_:1},8,["visible","title"])}}});export{v as _};
