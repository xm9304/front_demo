import{e,d as a,a as t,r as l,R as i,f as n,o as s,c as o,g as r,w as d,i as c,h as u,l as p,F as m,v as g,s as f,x as _,O as y,j as h,S as v,M as x,q as k}from"./index-615da61f.js";import{u as w}from"./usePagination-7dd46c3e.js";import b from"./index-c667a118.js";import C from"./EditModal-2a474635.js";import{g as j}from"./index-92b4d41b.js";import{S as z}from"./person-ff3306fc.js";import"./RightMenu-d6e48a1f.js";import"./regexp-53006fbc.js";const S={class:"page"},V={class:"content"},A={class:"gi_table_box",style:{"margin-top":"4px"}},R=k(a({__name:"Pane1",setup(a){const k=t(),R=l({name:"",status:""}),{loading:D,tableData:K,getTableData:M,pagination:O,selectKeys:T,select:E,selectAll:I}=function(a,t){const{formatResult:l,onSuccess:i,immediate:n,rowKey:s}=t||{},{pagination:o,setTotal:r}=w((()=>u())),d=e(!1),c=e([]),u=async()=>{try{d.value=!0;const e=await a({page:o.current,size:o.pageSize});c.value=l?l(e.data.list):e.data.list,r(e.data.total),i&&i()}catch(e){}finally{d.value=!1}};(n??1)&&u();const p=e([]);return{loading:d,tableData:c,getTableData:u,pagination:o,selectKeys:p,select:e=>{p.value=e},selectAll:e=>{const a=s??"id";p.value=e?c.value.map((e=>e[a])):[]}}}((e=>j({...R,current:e.page,pageSize:e.size})),{immediate:!1,formatResult:e=>e.map((e=>({...e,isEdit:!1})))});i((()=>{M()}));const q=()=>{v.warning({title:"提示",content:"是否确认删除？",hideCancel:!1,onOk:()=>{K.value=[]}})},P=e(),U=()=>{var e;null==(e=P.value)||e.add()},B=()=>{if(!T.value.length)return x.warning("请勾选数据");x.success("点击了导出")};return(e,a)=>{const t=n("a-card"),l=n("a-col"),i=n("icon-plus"),v=n("a-button"),w=n("icon-delete"),j=n("icon-export"),T=n("a-space"),F=n("a-option"),J=n("a-select"),N=n("a-input"),W=n("icon-search"),G=n("a-input-group"),H=n("icon-refresh"),L=n("a-row"),Q=n("a-table-column"),X=n("a-progress"),Y=n("a-tag"),Z=n("a-popconfirm"),$=n("a-table");return s(),o("div",S,[r(L,{align:"stretch",gutter:14,class:"pane"},{default:d((()=>[r(l,{xs:0,sm:8,md:7,lg:6,xl:5,xxl:4,flex:"260px",class:"h-full ov-hidden"},{default:d((()=>[r(t,{title:"数据分类",bordered:!1,class:"gi_card pane-item pane-left"},{default:d((()=>[r(b,{placeholder:"请输入搜索关键词",onNodeClick:a[0]||(a[0]=e=>c(O).onChange(1))})])),_:1})])),_:1}),r(l,{xs:24,sm:16,md:17,lg:18,xl:19,xxl:20,flex:"1",class:"h-full ov-hidden"},{default:d((()=>[r(t,{title:"数据列表",bordered:!1,"header-style":{display:"none"},class:"gi_card pane-item pane-right"},{default:d((()=>[u("div",V,[r(L,{justify:"space-between"},{default:d((()=>[r(T,{wrap:""},{default:d((()=>[r(v,{type:"primary",onClick:U},{icon:d((()=>[r(i)])),_:1}),r(v,{type:"primary",status:"danger",onClick:q},{icon:d((()=>[r(w)])),default:d((()=>[p("删除")])),_:1}),r(v,{type:"primary",status:"success",onClick:B},{icon:d((()=>[r(j)])),_:1})])),_:1}),r(T,{wrap:""},{default:d((()=>[r(J,{modelValue:c(R).status,"onUpdate:modelValue":a[1]||(a[1]=e=>c(R).status=e),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:d((()=>[(s(!0),o(m,null,g(c(z),(e=>(s(),f(F,{key:e.value,value:e.value},{default:d((()=>[p(_(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),r(G,null,{default:d((()=>[r(N,{modelValue:c(R).name,"onUpdate:modelValue":a[2]||(a[2]=e=>c(R).name=e),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),r(v,{type:"primary",onClick:c(M)},{default:d((()=>[r(W)])),_:1},8,["onClick"])])),_:1}),r(v,{type:"primary",onClick:c(M)},{icon:d((()=>[r(H)])),_:1},8,["onClick"])])),_:1})])),_:1}),u("section",A,[r($,{"row-key":"id",size:"small",loading:c(D),bordered:{cell:!0},data:c(K),scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:c(O),onSelect:c(E),onSelectAll:c(I)},{columns:d((()=>[r(Q,{title:"序号",width:68},{cell:d((e=>[p(_(e.rowIndex+1),1)])),_:1}),r(Q,{title:"姓名","data-index":"name"}),r(Q,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),r(Q,{title:"比例",width:200},{cell:d((({record:e})=>{return[r(X,{status:(a=e.proportion,a<30?"danger":a<60?"warning":"success"),percent:e.proportion/100},null,8,["status","percent"])];var a})),_:1}),r(Q,{title:"状态",width:100,align:"center"},{cell:d((({record:e})=>[(s(!0),o(m,null,g(c(z),(a=>(s(),o(m,{key:a.value},[a.value===e.status?(s(),f(Y,{key:0,size:"small",color:a.color},{default:d((()=>[p(_(a.name),1)])),_:2},1032,["color"])):y("",!0)],64)))),128))])),_:1}),r(Q,{title:"创建时间","data-index":"createTime",width:180}),r(Q,{title:"操作",width:200,align:"center",fixed:c(h)()?void 0:"right"},{cell:d((({record:e})=>[r(T,null,{default:d((()=>[r(v,{type:"primary",size:"mini",onClick:a=>{return t=e,void(null==(l=P.value)||l.edit(t.id));var t,l}},{default:d((()=>[p("修改")])),_:2},1032,["onClick"]),r(v,{size:"mini",onClick:a=>{return t=e,void k.push({path:"/data/detail",query:{id:t.id}});var t}},{default:d((()=>[p("详情")])),_:2},1032,["onClick"]),r(Z,{type:"warning",content:"您确定要删除该项吗?",onOk:a=>(e.id,x.success("删除成功"),void M())},{default:d((()=>[r(v,{type:"primary",status:"danger",size:"mini"},{default:d((()=>[p("删除")])),_:1})])),_:2},1032,["onOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","onSelect","onSelectAll"])])])])),_:1})])),_:1})])),_:1}),r(C,{ref_key:"EditModalRef",ref:P},null,512)])}}}),[["__scopeId","data-v-4b327879"]]);export{R as default};
