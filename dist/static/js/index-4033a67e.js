import{d as e,e as a,B as l,J as s,eL as o,eM as i,eN as t,f as u,o as n,t as v,w as r,a3 as d,h as f,O as p,i as c,g as x,y as g,a4 as m,T as y,s as h}from"./index-9e01b763.js";const I={style:{padding:"10px 14px 14px 14px"}},_={class:"name"},w=["src"],C=h(e({__name:"index",props:{fileInfo:{},onClose:{}},setup(e){const h=e,C=a(!1),N=a(null),S=a(null),k=l((()=>{var e;return(null==(e=h.fileInfo)?void 0:e.src)||""}));s((()=>{C.value=!0}));const{width:J,height:O}=o(),{width:z,height:A}=i(N),D=a({top:40,left:J.value-z.value}),R=JSON.parse(sessionStorage.getItem("AudioDialogXY"));R&&R.top&&R.left&&(D.value.top=R.top,D.value.left=R.left);const{x:X,y:Y}=t(N,{initialValue:{x:D.value.left-z.value,y:D.value.top}}),b=l((()=>{let e=X.value,a=Y.value;return X.value>J.value-z.value&&(e=J.value-z.value),X.value<0&&(e=0),Y.value>O.value-A.value&&(a=O.value-A.value),Y.value<0&&(a=0),sessionStorage.setItem("AudioDialogXY",JSON.stringify({top:a,left:e})),{left:e+"px",top:a+"px"}})),j=()=>{C.value=!1,h.onClose&&h.onClose()};return(e,a)=>{const l=u("icon-music"),s=u("icon-close");return n(),v(y,{name:"slide-dynamic-origin"},{default:r((()=>{var e,a;return[d(f("div",{class:"audio-preview-wrapper",ref_key:"audioRef",ref:N,style:p(c(b))},[f("section",I,[f("div",{class:"head",ref_key:"audioHeadRef",ref:S},[f("div",_,[x(l,{size:16,spin:""}),f("span",null,g(null==(e=h.fileInfo)?void 0:e.name)+"."+g(null==(a=h.fileInfo)?void 0:a.extendName),1)]),f("div",{class:"close-icon",onClick:j},[x(s,{size:12})])],512),f("audio",{class:"audio",src:c(k),controls:"",autoplay:""},null,8,w)])],4),[[m,c(C)]])]})),_:1})}}}),[["__scopeId","data-v-25a0bdff"]]);export{C as default};
