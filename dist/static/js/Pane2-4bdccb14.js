import{_ as n}from"./index-2aaed5fb.js";import{d as e,e as t,R as a,f as o,o as i,s as r,w as s,g as l,l as c,h as d,i as p,S as u,p as m,m as g,q as f}from"./index-a681ebd3.js";import{u as b}from"./usePagination-0c6ff8e4.js";import{g as w}from"./index-24a879c4.js";import{S as y}from"./person-ff3306fc.js";const x=n=>(m("data-v-1fb078cd"),n=n(),g(),n),h=x((()=>d("span",null,"这里采用 模板 + tsx 方式使用表格，具体看代码使用",-1))),v=x((()=>d("span",null,"查看代码",-1))),_={class:"content"},z={class:"gi_table_box"},I=f(e({__name:"Pane2",setup(e){const m=()=>{u.open({title:"查看代码",content:()=>l(n,{type:"vue",codeJson:'<template>\n  <a-card :bordered="false" class="gi_card pane2">\n    <a-row justify="space-between" align="center" wrap>\n      <a-space wrap>\n        <a-alert type="normal">\n          <template #icon>\n            <icon-exclamation-circle-fill />\n          </template>\n          <span>这里采用 模板 + tsx 方式使用表格，具体看代码使用</span>\n        </a-alert>\n      </a-space>\n\n      <a-space wrap>\n        <a-button type="primary" status="success" @click="onViewCode">\n          <template #icon><icon-code /></template>\n          <span>查看代码</span>\n        </a-button>\n        <a-button type="primary">导出</a-button>\n      </a-space>\n    </a-row>\n\n    <section class="content">\n      <section class="gi_table_box">\n        <a-table\n          row-key="id"\n          size="small"\n          :loading="loading"\n          :bordered="{ cell: true }"\n          :columns="columns"\n          :data="tableData"\n          :scroll="{ x: \'100%\', y: \'100%\', minWidth: 1000 }"\n          :row-selection="{ type: \'checkbox\', showCheckedAll: true }"\n          :pagination="pagination"\n          @select="select"\n          @select-all="selectAll"\n        >\n        </a-table>\n      </section>\n    </section>\n  </a-card>\n</template>\n\n<script lang="tsx" setup>\nimport type { TableColumnData, TableInstance } from \'@arco-design/web-vue\'\nimport { Modal } from \'@arco-design/web-vue\'\nimport { usePagination } from \'@/hooks\'\nimport { getPersonList } from \'@/apis\'\nimport type { PersonItem } from \'@/apis\'\nimport { StatusList } from \'@/constant/person\'\nimport Pane2Code from \'./Pane2Code\'\n\nconst onViewCode = () => {\n  Modal.open({\n    title: \'查看代码\',\n    content: () => <gi-code-view type="vue" codeJson={Pane2Code}></gi-code-view>,\n    fullscreen: true\n  })\n}\n\nconst columns: TableColumnData[] = [\n  {\n    title: \'序号\',\n    width: 68,\n    render: ({ record, column, rowIndex }) => <span>{rowIndex + 1}</span>\n  },\n  {\n    title: \'姓名\',\n    dataIndex: \'name\'\n  },\n  {\n    title: \'创建时间\',\n    dataIndex: \'createTime\',\n    width: 180\n  },\n  {\n    title: \'地址\',\n    dataIndex: \'address\',\n    ellipsis: true,\n    tooltip: true\n  },\n  {\n    title: \'比例\',\n    width: 68,\n    align: \'center\',\n    render: ({ record }) => (\n      <a-progress size="mini" status={getProportionColor(record.proportion)} percent={record.proportion / 100} />\n    )\n  },\n  {\n    title: \'状态\',\n    width: 100,\n    align: \'center\',\n    render: (data) => {\n      const index = StatusList.findIndex((i) => i.value === data.record.status)\n      if (index >= 0) {\n        return (\n          <a-tag size="small" color={StatusList[index].color}>\n            {StatusList[index].name}\n          </a-tag>\n        )\n      }\n    }\n  },\n  {\n    title: \'操作\',\n    width: 200,\n    align: \'center\',\n    render: ({ record }) => (\n      <a-space>\n        <a-button type="primary" size="mini">\n          <icon-edit></icon-edit>\n        </a-button>\n        <a-button size="mini">详情</a-button>\n        <a-popconfirm type="warning" content="您确定要删除该项吗?">\n          <a-button type="primary" status="danger" size="mini">\n            <icon-delete />\n          </a-button>\n        </a-popconfirm>\n      </a-space>\n    )\n  }\n]\n\nconst { pagination, setTotal } = usePagination(() => getTableData())\nconst tableData = ref<PersonItem[]>([])\nconst loading = ref(false)\n\nconst getTableData = async () => {\n  try {\n    loading.value = true\n    const res = await getPersonList({\n      current: pagination.current,\n      pageSize: pagination.pageSize\n    })\n    tableData.value = res.data.list\n    setTotal(res.data.total)\n  } catch (error) {\n  } finally {\n    loading.value = false\n  }\n}\n\nonActivated(() => {\n  getTableData()\n})\n\n// 比例进度条颜色\nconst getProportionColor = (proportion: number) => {\n  if (proportion < 30) return \'danger\'\n  if (proportion < 60) return \'warning\'\n  return \'success\'\n}\n\n// 勾选\nconst selectRowKeys = ref<(string | number)[]>([])\nconst select: TableInstance[\'onSelect\'] = (rowKeys) => {\n  selectRowKeys.value = rowKeys\n}\n\n// 全选\nconst selectAll: TableInstance[\'onSelectAll\'] = (checked) => {\n  selectRowKeys.value = checked ? tableData.value.map((i) => i.id) : []\n}\n<\/script>\n\n<style lang="scss" scoped>\n.pane2 {\n  flex: 1;\n  margin: $margin;\n}\n.content {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  background-color: var(--color-bg-1);\n  border-radius: $radius-box;\n}\n</style>\n'},null),fullscreen:!0})},g=[{title:"序号",width:68,render:({record:n,column:e,rowIndex:t})=>l("span",null,[t+1])},{title:"姓名",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime",width:180},{title:"地址",dataIndex:"address",ellipsis:!0,tooltip:!0},{title:"比例",width:68,align:"center",render:({record:n})=>l(o("a-progress"),{size:"mini",status:T(n.proportion),percent:n.proportion/100},null)},{title:"状态",width:100,align:"center",render:n=>{const e=y.findIndex((e=>e.value===n.record.status));if(e>=0)return l(o("a-tag"),{size:"small",color:y[e].color},{default:()=>[y[e].name]})}},{title:"操作",width:200,align:"center",render:({record:n})=>l(o("a-space"),null,{default:()=>[l(o("a-button"),{type:"primary",size:"mini"},{default:()=>[l(o("icon-edit"),null,null)]}),l(o("a-button"),{size:"mini"},{default:()=>[c("详情")]}),l(o("a-popconfirm"),{type:"warning",content:"您确定要删除该项吗?"},{default:()=>[l(o("a-button"),{type:"primary",status:"danger",size:"mini"},{default:()=>[l(o("icon-delete"),null,null)]})]})]})}],{pagination:f,setTotal:x}=b((()=>P())),I=t([]),S=t(!1),P=async()=>{try{S.value=!0;const n=await w({current:f.current,pageSize:f.pageSize});I.value=n.data.list,x(n.data.total)}catch(n){}finally{S.value=!1}};a((()=>{P()}));const T=n=>n<30?"danger":n<60?"warning":"success",k=t([]),C=n=>{k.value=n},D=n=>{k.value=n?I.value.map((n=>n.id)):[]};return(n,e)=>{const t=o("icon-exclamation-circle-fill"),a=o("a-alert"),u=o("a-space"),b=o("icon-code"),w=o("a-button"),y=o("a-row"),x=o("a-table"),P=o("a-card");return i(),r(P,{bordered:!1,class:"gi_card pane2"},{default:s((()=>[l(y,{justify:"space-between",align:"center",wrap:""},{default:s((()=>[l(u,{wrap:""},{default:s((()=>[l(a,{type:"normal"},{icon:s((()=>[l(t)])),default:s((()=>[h])),_:1})])),_:1}),l(u,{wrap:""},{default:s((()=>[l(w,{type:"primary",status:"success",onClick:m},{icon:s((()=>[l(b)])),default:s((()=>[v])),_:1}),l(w,{type:"primary"},{default:s((()=>[c("导出")])),_:1})])),_:1})])),_:1}),d("section",_,[d("section",z,[l(x,{"row-key":"id",size:"small",loading:p(S),bordered:{cell:!0},columns:g,data:p(I),scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:p(f),onSelect:C,onSelectAll:D},null,8,["loading","data","pagination"])])])])),_:1})}}}),[["__scopeId","data-v-1fb078cd"]]);export{I as default};
