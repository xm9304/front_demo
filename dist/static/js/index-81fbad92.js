import{_ as e}from"./AddRoleModal.vue_vue_type_script_setup_true_lang-0124e9d1.js";import{_ as a}from"./PermModal.vue_vue_type_script_setup_true_lang-b0044a19.js";import{d as l,e as t,r as i,f as n,o as d,c as o,h as s,w as r,i as u,k as c,g as p,v as _,q as m,N as f,eO as y,M as g}from"./index-7745a379.js";import{u as v}from"./usePagination-bfc1e195.js";import{j as h}from"./index-4e03c955.js";const k={class:"gi_page role-manage"},w=p("span",null,"查询",-1),x=p("span",null,"重置",-1),b=p("span",null,"新增",-1),C=p("span",null,"删除",-1),j={class:"gi_mt"},V=p("span",null,"编辑",-1),M=p("span",null,"删除",-1),R=l({name:"SystemRole",__name:"index",setup(l){const R=t(),z=t(),A=i({name:"",status:""}),{pagination:P,setTotal:O}=v((()=>{U()})),S=t(!1),T=t([]),U=async()=>{try{S.value=!0;const e=await h();T.value=e.data.list,O(e.data.total)}catch(e){}finally{S.value=!1}};U();const q=()=>{P.onChange(1)},D=()=>{A.status="",A.status="",P.onChange(1)},I=()=>{var e;null==(e=R.value)||e.add()},N=()=>{g.info("点击了确认按钮")},W=t([]),B=e=>{W.value=e},E=()=>{if(!W.value.length)return g.warning("请选择角色");g.info("点击了批量删除")};return(l,t)=>{const i=n("icon-search"),g=n("a-input"),v=n("a-option"),h=n("a-select"),O=n("a-button"),U=n("icon-refresh"),W=n("a-space"),F=n("icon-plus"),G=n("icon-delete"),H=n("a-row"),J=n("a-table-column"),K=n("a-tag"),L=n("icon-edit"),Q=n("icon-safe"),X=n("a-popconfirm"),Y=n("a-table"),Z=n("a-card");return d(),o("div",k,[s(Z,{title:"角色管理"},{default:r((()=>[s(W,{wrap:""},{default:r((()=>[s(g,{modelValue:u(A).name,"onUpdate:modelValue":t[0]||(t[0]=e=>u(A).name=e),placeholder:"输入角色名搜索","allow-clear":"",style:{width:"250px"}},{prefix:r((()=>[s(i)])),_:1},8,["modelValue"]),s(h,{modelValue:u(A).status,"onUpdate:modelValue":t[1]||(t[1]=e=>u(A).status=e),placeholder:"角色状态","allow-clear":"",style:{width:"120px"}},{default:r((()=>[s(v,{value:1},{default:r((()=>[c("正常")])),_:1}),s(v,{value:0},{default:r((()=>[c("禁用")])),_:1})])),_:1},8,["modelValue"]),s(O,{type:"primary",onClick:q},{icon:r((()=>[s(i)])),default:r((()=>[w])),_:1}),s(O,{onClick:D},{icon:r((()=>[s(U)])),default:r((()=>[x])),_:1})])),_:1}),s(H,{class:"gi_my"},{default:r((()=>[s(W,null,{default:r((()=>[s(O,{type:"primary",onClick:I},{icon:r((()=>[s(F)])),default:r((()=>[b])),_:1}),s(O,{type:"primary",status:"danger",onClick:E},{icon:r((()=>[s(G)])),default:r((()=>[C])),_:1})])),_:1})])),_:1}),p("section",j,[s(Y,{"row-key":"id",data:u(T),bordered:{cell:!0},loading:u(S),scroll:{x:"100%",y:"100%",minWidth:900},pagination:u(P),"row-selection":{type:"checkbox",showCheckedAll:!1},onSelect:B},{columns:r((()=>[s(J,{title:"序号",width:64},{cell:r((e=>[c(_(e.rowIndex+1),1)])),_:1}),s(J,{title:"角色名称","data-index":"name"}),s(J,{title:"角色编号","data-index":"code"}),s(J,{title:"状态",width:100,align:"center"},{cell:r((({record:e})=>[1==e.status?(d(),m(K,{key:0,color:"green"},{default:r((()=>[c("正常")])),_:1})):f("",!0),0==e.status?(d(),m(K,{key:1,color:"red"},{default:r((()=>[c("禁用")])),_:1})):f("",!0)])),_:1}),s(J,{title:"描述","data-index":"description"}),s(J,{title:"创建时间","data-index":"createTime"}),s(J,{title:"操作",width:280,align:"center",fixed:u(y)()?void 0:"right"},{cell:r((({record:e})=>[s(W,null,{default:r((()=>[s(O,{type:"primary",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=R.value)||t.edit(l.id));var l,t}},{icon:r((()=>[s(L)])),default:r((()=>[V])),_:2},1032,["disabled","onClick"]),s(O,{type:"primary",status:"success",size:"mini",disabled:e.disabled,onClick:a=>{return l=e,void(null==(t=z.value)||t.open({code:l.code,title:l.name}));var l,t}},{icon:r((()=>[s(Q)])),default:r((()=>[c("分配权限")])),_:2},1032,["disabled","onClick"]),s(X,{type:"warning",content:"确定删除该角色吗?",onOk:N},{default:r((()=>[s(O,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:r((()=>[s(G)])),default:r((()=>[M])),_:2},1032,["disabled"])])),_:2},1024)])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination"])]),s(e,{ref_key:"AddRoleModalRef",ref:R},null,512),s(a,{ref_key:"PermModalRef",ref:z},null,512)])),_:1})])}}});export{R as default};
