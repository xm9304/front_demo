import{_ as e}from"./index-2e1261ad.js";import{d as l,z as a,eP as d,eO as t,e as u,r as o,eQ as n,f as c,o as i,q as s,w as r,h as p,i as m,k as f,N as h,g as V,v,j as k,eR as y,M as _}from"./index-3705f1af.js";import{b,c as x}from"./index-185203b4.js";const w=l({__name:"AddMenuModal",props:{menus:{default:()=>[]}},setup(l,{expose:w}){const U=l,g=a((()=>{const e=d(U.menus,(e=>[1,2].includes(e.type)));return t.mapTree(e,(e=>({id:e.id,title:e.title,children:e.children})))})),I=u(),j=u(""),q=u(!1),A=a((()=>!!j.value)),S=a((()=>A.value?"编辑菜单":"新增菜单")),M=u(!1),O=o({type:1,icon:"",svgIcon:"",title:"",sort:0,status:1,path:"",component:"",keepAlive:!1,hidden:!0,parentId:"",redirect:"",breadcrumb:!0,affix:!0,alwaysShow:!1}),z=a((()=>n(O.path))),F={title:[{required:!0,message:"请输入菜单标题"}],path:[{required:!0,message:"请输入路由路径"}],component:[{required:!0,message:"请输入组件路径"}]},N=()=>{var e;null==(e=I.value)||e.resetFields()};w({add:()=>{j.value="",q.value=!0},edit:async e=>{j.value=e;const l=await b({id:e});Object.assign(O,l.data),y(O.path)&&(M.value=!0),q.value=!0}});const R=async()=>{try{return!!(await x(O)).data&&(_.success("模拟保存成功"),!0)}catch(e){return!1}};return(l,a)=>{const d=c("a-radio"),t=c("a-radio-group"),u=c("a-form-item"),o=c("a-tree-select"),n=e,y=c("icon-question-circle-fill"),_=c("a-tooltip"),b=c("a-col"),x=c("a-row"),w=c("a-input"),U=c("a-switch"),j=c("a-input-number"),B=c("a-form"),C=c("a-modal");return i(),s(C,{title:m(S),visible:m(q),"onUpdate:visible":a[17]||(a[17]=e=>k(q)?q.value=e:null),width:625,"mask-closable":!1,onBeforeOk:R,onClose:N},{default:r((()=>[p(B,{ref_key:"FormRef",ref:I,model:m(O),rules:F,"auto-label-width":""},{default:r((()=>[p(u,{label:"菜单类型",field:"type"},{default:r((()=>[p(t,{modelValue:m(O).type,"onUpdate:modelValue":a[0]||(a[0]=e=>m(O).type=e),type:"button",disabled:m(A)},{default:r((()=>[p(d,{value:1},{default:r((()=>[f("目录")])),_:1}),p(d,{value:2},{default:r((()=>[f("菜单")])),_:1}),p(d,{value:3},{default:r((()=>[f("按钮")])),_:1})])),_:1},8,["modelValue","disabled"])])),_:1}),p(u,{label:"上级菜单",field:"parentId"},{default:r((()=>[p(o,{modelValue:m(O).parentId,"onUpdate:modelValue":a[1]||(a[1]=e=>m(O).parentId=e),placeholder:"请选择上级菜单","allow-clear":"","allow-search":"",disabled:m(A),data:m(g),fieldNames:{key:"id",title:"title",children:"children"}},null,8,["modelValue","disabled","data"])])),_:1}),[1,2].includes(m(O).type)?(i(),s(x,{key:0,gutter:16},{default:r((()=>[p(b,{span:12},{default:r((()=>[p(u,{label:"自定义图标",field:"svgIcon"},{default:r((()=>[p(n,{modelValue:m(O).svgIcon,"onUpdate:modelValue":a[2]||(a[2]=e=>m(O).svgIcon=e),type:"custom"},null,8,["modelValue"]),p(_,{content:"优先显示"},{default:r((()=>[p(y,{size:18,style:{color:"rgba(var(--warning-6))","margin-left":"8px"}})])),_:1})])),_:1})])),_:1}),p(b,{span:12},{default:r((()=>[p(u,{label:"菜单图标",field:"icon"},{default:r((()=>[p(n,{modelValue:m(O).icon,"onUpdate:modelValue":a[3]||(a[3]=e=>m(O).icon=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):h("",!0),p(u,{label:"菜单标题",field:"title"},{default:r((()=>[p(w,{modelValue:m(O).title,"onUpdate:modelValue":a[4]||(a[4]=e=>m(O).title=e),placeholder:"请输入菜单标题"},null,8,["modelValue"])])),_:1}),[1,2].includes(m(O).type)?(i(),s(u,{key:1,label:"路由路径",field:"path"},{extra:r((()=>[V("div",null,"菜单名称由系统自动生成："+v(m(z)),1)])),default:r((()=>[p(w,{modelValue:m(O).path,"onUpdate:modelValue":a[5]||(a[5]=e=>m(O).path=e),placeholder:"请输入路由路径"},null,8,["modelValue"])])),_:1})):h("",!0),1===m(O).type?(i(),s(u,{key:2,label:"重定向",field:"redirect"},{default:r((()=>[p(w,{modelValue:m(O).redirect,"onUpdate:modelValue":a[6]||(a[6]=e=>m(O).redirect=e),placeholder:"请输入重定向地址"},null,8,["modelValue"])])),_:1})):h("",!0),[1,2].includes(m(O).type)?(i(),s(u,{key:3,label:"是否外链",field:"isExternalUrl"},{default:r((()=>[p(t,{modelValue:m(M),"onUpdate:modelValue":a[7]||(a[7]=e=>k(M)?M.value=e:null),type:"button"},{default:r((()=>[p(d,{value:!0},{default:r((()=>[f("是")])),_:1}),p(d,{value:!1},{default:r((()=>[f("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),2===m(O).type?(i(),s(u,{key:4,label:"组件路径",field:"component"},{default:r((()=>[m(M)?(i(),s(w,{key:0,modelValue:m(O).component,"onUpdate:modelValue":a[8]||(a[8]=e=>m(O).component=e),placeholder:"请输入组件路径"},null,8,["modelValue"])):(i(),s(w,{key:1,modelValue:m(O).component,"onUpdate:modelValue":a[9]||(a[9]=e=>m(O).component=e),placeholder:"请输入组件路径"},{prepend:r((()=>[f("@/views/")])),append:r((()=>[f(".vue")])),_:1},8,["modelValue"]))])),_:1})):h("",!0),[1,2].includes(m(O).type)?(i(),s(x,{key:5,gutter:16},{default:r((()=>[p(b,{span:8},{default:r((()=>[p(u,{label:"状态",field:"status"},{default:r((()=>[p(U,{type:"round",modelValue:m(O).status,"onUpdate:modelValue":a[10]||(a[10]=e=>m(O).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"启用","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1}),p(b,{span:8},{default:r((()=>[p(u,{label:"是否隐藏",field:"hidden"},{default:r((()=>[p(U,{type:"round",modelValue:m(O).hidden,"onUpdate:modelValue":a[11]||(a[11]=e=>m(O).hidden=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"隐藏","unchecked-text":"显示"},null,8,["modelValue"])])),_:1})])),_:1}),p(b,{span:8},{default:r((()=>[p(u,{label:"是否缓存",field:"keepAlive"},{default:r((()=>[p(U,{type:"round",modelValue:m(O).keepAlive,"onUpdate:modelValue":a[12]||(a[12]=e=>m(O).keepAlive=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"是","unchecked-text":"否"},null,8,["modelValue"])])),_:1})])),_:1}),p(b,{span:8},{default:r((()=>[p(u,{label:"面包屑",field:"breadcrumb"},{default:r((()=>[p(U,{type:"round",modelValue:m(O).breadcrumb,"onUpdate:modelValue":a[13]||(a[13]=e=>m(O).breadcrumb=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})])),_:1}),p(b,{span:8},{default:r((()=>[1===m(O).type?(i(),s(u,{key:0,label:"总是显示",field:"alwaysShow"},{default:r((()=>[p(U,{type:"round",modelValue:m(O).alwaysShow,"onUpdate:modelValue":a[14]||(a[14]=e=>m(O).alwaysShow=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})):h("",!0),2===m(O).type?(i(),s(u,{key:1,label:"页签",field:"affix"},{default:r((()=>[p(U,{type:"round",modelValue:m(O).affix,"onUpdate:modelValue":a[15]||(a[15]=e=>m(O).affix=e),"checked-value":!0,"unchecked-value":!1,"checked-text":"显示","unchecked-text":"隐藏"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1})])),_:1})):h("",!0),p(u,{label:"菜单排序",field:"sort"},{default:r((()=>[p(j,{modelValue:m(O).sort,"onUpdate:modelValue":a[16]||(a[16]=e=>m(O).sort=e),placeholder:"请输入菜单排序",min:1,mode:"button",style:{width:"120px"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","visible"])}}});export{w as _};
