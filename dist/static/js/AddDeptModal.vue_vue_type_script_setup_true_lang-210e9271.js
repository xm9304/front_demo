import{u as e}from"./useDept-db27839c.js";import{d as a,e as l,z as t,r as d,f as s,o,q as u,w as i,h as n,i as r,j as m,eO as c,M as p}from"./index-7745a379.js";import{g as f,s as h}from"./index-4e03c955.js";const v=a({__name:"AddDeptModal",setup(a,{expose:v}){const V=l(),w=l(""),b=l(!1),_=t((()=>!!w.value)),x=t((()=>_.value?"编辑部门":"新增部门")),{deptList:k,getDeptList:g}=e();g();const y=d({id:"",parentId:"",name:"",sort:0,status:1,description:""}),U={name:[{required:!0,message:"请输入部门名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}]},j=()=>{var e;null==(e=V.value)||e.resetFields()};v({add:()=>{w.value="",b.value=!0},edit:async e=>{k.value.length||await g(),w.value=e;const a=await f({id:e});Object.assign(y,a.data),b.value=!0}});const I=async()=>{try{return!!(await h(y)).data&&(p.success("模拟保存成功"),!0)}catch(e){return!1}};return(e,a)=>{const l=s("a-tree-select"),t=s("a-form-item"),d=s("a-input"),p=s("a-input-number"),f=s("a-textarea"),h=s("a-switch"),v=s("a-form"),w=s("a-modal");return o(),u(w,{visible:r(b),"onUpdate:visible":a[5]||(a[5]=e=>m(b)?b.value=e:null),title:r(x),width:r(c)()?"100%":"auto","mask-closable":!1,onBeforeOk:I,onClose:j},{default:i((()=>[n(v,{ref_key:"FormRef",ref:V,model:r(y),rules:U,size:"medium","auto-label-width":""},{default:i((()=>[n(t,{label:"上级部门",field:"parentId"},{default:i((()=>[n(l,{modelValue:r(y).parentId,"onUpdate:modelValue":a[0]||(a[0]=e=>r(y).parentId=e),"allow-clear":"",data:r(k),placeholder:"请选择",fieldNames:{key:"id",title:"name",children:"children"}},null,8,["modelValue","data"])])),_:1}),n(t,{label:"部门名称",field:"name"},{default:i((()=>[n(d,{modelValue:r(y).name,"onUpdate:modelValue":a[1]||(a[1]=e=>r(y).name=e),placeholder:"请输入部门名称","allow-clear":""},null,8,["modelValue"])])),_:1}),n(t,{label:"排序",field:"sort"},{default:i((()=>[n(p,{modelValue:r(y).sort,"onUpdate:modelValue":a[2]||(a[2]=e=>r(y).sort=e),style:{width:"120px"}},null,8,["modelValue"])])),_:1}),n(t,{label:"描述",field:"description"},{default:i((()=>[n(f,{modelValue:r(y).description,"onUpdate:modelValue":a[3]||(a[3]=e=>r(y).description=e),"max-length":200,placeholder:"请填写描述","auto-size":{minRows:3},"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(t,{label:"状态",field:"status"},{default:i((()=>[n(h,{type:"round",modelValue:r(y).status,"onUpdate:modelValue":a[4]||(a[4]=e=>r(y).status=e),"checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title","width"])}}});export{v as _};
