import{U as e,V as a,eK as t,eL as i,ey as l,d as n,u as o,a as s,eM as d,e as c,H as u,eN as r,f as p,o as f,c as m,g as _,w as v,k as y,F as h,t as g,i as w,q as k,P as x,v as C,N as j,$ as M,a0 as I,M as b,S as F,s as L,p as N,l as S,h as T,n as q}from"./index-df2cb8ce.js";import{f as B,i as R}from"./file-map-2a15779f.js";import{a as V}from"./index.es-4231a52b.js";/* empty css               */import $ from"./FileNavPath-9bf61c4c.js";import K from"./FileGrid-ebb99d30.js";import P from"./FileList-71f1c1c5.js";import U from"./index-ebe0eba4.js";import z from"./index-e73e2daa.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-8cc06503.js";import G from"./index-3c1d8cd8.js";import"./FileImg-7b53257e.js";import"./FileRightMenu-bcde92c9.js";function H(e,a){const n=document.createElement("div");document.body.appendChild(n);const o=t(e,{...a,onClose:()=>{setTimeout((()=>{o.unmount(),document.body.removeChild(n)}),350)}});o.use(i),o.use(l),o.mount(n)}const Z=e=>(N("data-v-ab1f49e5"),e=e(),S(),e),A={class:"file-main"},D=Z((()=>T("span",null,"上传文件",-1))),J=Z((()=>T("span",null,"上传文件夹",-1))),O=q(n({__name:"index",setup(t){var i;const l=o(),n=s(),N=d(),S=c(!1),T=c([]),q=c("0");q.value=(null==(i=l.query.fileType)?void 0:i.toString())||"0";const Z=async()=>{try{S.value=!0,O.value=!1;const i=await(t={fileType:q.value},e.get(`${a}/file/list`,t));T.value=i.data.list}catch(i){return i}finally{S.value=!1}var t};u((()=>{Z()})),r((e=>{var a;e.query.fileType&&(q.value=null==(a=e.query.fileType)?void 0:a.toString(),Z())}));const O=c(!1),Q=e=>{if(b.success(`点击了文件-${e.name}`),R.includes(e.extendName)&&e.src){const a=T.value.filter((e=>R.includes(e.extendName))).map((e=>e.src||"")),t=a.findIndex((a=>a===e.src));a.length&&V({options:{initialViewIndex:t},images:a})}"mp4"===e.extendName&&H(E,{fileInfo:e}),"mp3"===e.extendName&&function(e){H(G,{fileInfo:e})}(e)},W=e=>{N.addSelectedFileItem(e)},X=(e,a)=>{b.success("点击了"+e),"delete"===e&&F.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1}),"rename"===e&&H(z,{fileInfo:a}),"move"===e&&function(e){H(U,{fileInfo:e})}(a),"detail"===e&&n.push({path:"/file/detail"})},Y=()=>{F.warning({title:"提示",content:"是否确认删除？",hideCancel:!1})};return(e,a)=>{const t=p("icon-upload"),i=p("a-button"),l=L,n=p("a-doption"),o=p("a-dropdown"),s=p("a-option"),d=p("a-select"),c=p("a-input"),u=p("icon-search"),r=p("a-input-group"),b=p("a-space"),F=p("icon-delete"),q=p("icon-select-all"),R=p("icon-swap"),V=p("a-tooltip"),U=p("icon-filter"),z=p("icon-apps"),E=p("icon-list"),G=p("a-button-group"),H=p("a-row"),Z=p("a-empty"),ee=p("a-spin");return f(),m("div",A,[_($),_(H,{justify:"space-between",class:"row-operate"},{default:v((()=>[_(b,{wrap:""},{default:v((()=>[_(o,null,{content:v((()=>[_(n,null,{icon:v((()=>[_(l,{name:"upload-file"})])),default:v((()=>[D])),_:1}),_(n,null,{icon:v((()=>[_(l,{name:"upload-folder"})])),default:v((()=>[J])),_:1})])),default:v((()=>[_(i,{type:"primary",shape:"round"},{icon:v((()=>[_(t)])),default:v((()=>[y("上传")])),_:1})])),_:1}),_(r,null,{default:v((()=>[_(d,{style:{width:"150px"},placeholder:"请选择"},{default:v((()=>[(f(!0),m(h,null,g(w(B),(e=>(f(),k(s,{key:e.value},{icon:v((()=>[(f(),k(x(e.icon),{size:"18",color:"#999"}))])),default:v((()=>[y(C(e.name),1)])),_:2},1024)))),128))])),_:1}),_(c,{placeholder:"请输入关键词...","allow-clear":""}),_(i,{type:"primary"},{icon:v((()=>[_(u)])),default:v((()=>[y("搜索")])),_:1})])),_:1})])),_:1}),_(b,{wrap:""},{default:v((()=>[w(O)?(f(),k(i,{key:0,disabled:!w(N).selectedFileIdList.length,type:"primary",status:"danger",onClick:Y},{icon:v((()=>[_(F)])),_:1},8,["disabled"])):j("",!0),_(i,{type:"primary",onClick:a[0]||(a[0]=e=>O.value=!w(O))},{icon:v((()=>[_(q)])),default:v((()=>[y(C(w(O)?"取消批量":"批量操作"),1)])),_:1}),_(G,null,{default:v((()=>[_(V,{content:"传输列表",position:"bottom"},{default:v((()=>[_(i,{onClick:a[1]||(a[1]=e=>S.value=!w(S))},{icon:v((()=>[_(R)])),_:1})])),_:1}),_(V,{content:"排序",position:"bottom"},{default:v((()=>[_(i,null,{icon:v((()=>[_(U)])),_:1})])),_:1}),_(V,{content:"视图",position:"bottom"},{default:v((()=>[_(i,{onClick:w(N).changeViewMode},{icon:v((()=>["grid"===w(N).viewMode?(f(),k(z,{key:0})):(f(),k(E,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),_(ee,{class:"file-wrap",loading:w(S)},{default:v((()=>[M(_(K,{data:w(T),isBatchMode:w(O),selectedFileIdList:w(N).selectedFileIdList,onClick:Q,onCheck:W,onRightMenuClick:X},null,8,["data","isBatchMode","selectedFileIdList"]),[[I,w(T).length&&"grid"==w(N).viewMode]]),M(_(P,{data:w(T),isBatchMode:w(O),onClick:Q,onRightMenuClick:X},null,8,["data","isBatchMode"]),[[I,w(T).length&&"list"==w(N).viewMode]]),M(_(Z,null,null,512),[[I,!w(T).length]])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-ab1f49e5"]]);export{O as default};
