import{e,M as a,R as t,d as l,a as s,r as n,S as i,f as o,o as r,c,g as d,w as u,i as p,h as m,l as f,F as g,v,s as _,x as h,O as y,j as x,q as w}from"./index-c4367a20.js";import{u as k}from"./usePagination-99a404ff.js";import C from"./index-f82b42b1.js";import b from"./EditModal-a608887a.js";import{g as j,d as z}from"./index-3f64f856.js";import{S}from"./person-ff3306fc.js";import"./RightMenu-6cc1c69f.js";import"./regexp-53006fbc.js";const T={class:"page"},D={class:"content"},M={class:"gi_table_box",style:{"margin-top":"4px"}},V=w(l({__name:"Pane1",setup(l){const w=s(),V=n({name:"",status:""}),{loading:A,tableData:R,getTableData:B,pagination:K,selectKeys:O,select:E,selectAll:I,handleDelete:q}=function(l,s){const{formatResult:n,onSuccess:i,immediate:o,rowKey:r}=s||{},{pagination:c,setTotal:d}=k((()=>m())),u=e(!1),p=e([]),m=async()=>{try{u.value=!0;const e=await l({page:c.current,size:c.pageSize});p.value=n?n(e.data.list):e.data.list,d(e.data.total),i&&i()}catch(e){}finally{u.value=!1}};(o??1)&&m();const f=e([]);return{loading:u,tableData:p,getTableData:m,pagination:c,selectKeys:f,select:e=>{f.value=e},selectAll:e=>{const a=r??"id";f.value=e?p.value.map((e=>e[a])):[]},handleDelete:async(e,l)=>{if(!((null==l?void 0:l.showModal)??1))try{const t=await e();return t.success&&(a.success((null==l?void 0:l.successTip)||"删除成功！"),f.value=[],m()),t.success}catch(s){return!1}t.warning({title:(null==l?void 0:l.title)||"提示",content:(null==l?void 0:l.content)||"是否确认删除？",hideCancel:!1,maskClosable:!1,onBeforeOk:async()=>{try{const t=await e();return t.success&&(a.success((null==l?void 0:l.successTip)||"删除成功！"),f.value=[],m()),t.success}catch(s){return!1}}})}}}((e=>j({...V,current:e.page,pageSize:e.size})),{immediate:!1,formatResult:e=>e.map((e=>({...e,isEdit:!1})))});i((()=>{B()}));const P=e(),U=()=>{var e;null==(e=P.value)||e.add()},F=()=>{if(!O.value.length)return a.warning("请选择删除项！");q((()=>z({ids:O.value})),{successTip:"批量删除成功！"})},J=()=>{if(!O.value.length)return a.warning("请勾选数据");a.success("点击了导出")};return(e,a)=>{const t=o("a-card"),l=o("a-col"),s=o("icon-plus"),n=o("a-button"),i=o("icon-delete"),k=o("icon-export"),j=o("a-space"),O=o("a-option"),N=o("a-select"),W=o("a-input"),$=o("icon-search"),G=o("a-input-group"),H=o("icon-refresh"),L=o("a-row"),Q=o("a-table-column"),X=o("a-progress"),Y=o("a-tag"),Z=o("a-popconfirm"),ee=o("a-table");return r(),c("div",T,[d(L,{align:"stretch",gutter:14,class:"pane"},{default:u((()=>[d(l,{xs:0,sm:8,md:7,lg:6,xl:5,xxl:4,flex:"260px",class:"h-full ov-hidden"},{default:u((()=>[d(t,{title:"数据分类",bordered:!1,class:"gi_card pane-item pane-left"},{default:u((()=>[d(C,{placeholder:"请输入搜索关键词",onNodeClick:a[0]||(a[0]=e=>p(K).onChange(1))})])),_:1})])),_:1}),d(l,{xs:24,sm:16,md:17,lg:18,xl:19,xxl:20,flex:"1",class:"h-full ov-hidden"},{default:u((()=>[d(t,{title:"数据列表",bordered:!1,"header-style":{display:"none"},class:"gi_card pane-item pane-right"},{default:u((()=>[m("div",D,[d(L,{justify:"space-between"},{default:u((()=>[d(j,{wrap:""},{default:u((()=>[d(n,{type:"primary",onClick:U},{icon:u((()=>[d(s)])),_:1}),d(n,{type:"primary",status:"danger",onClick:F},{icon:u((()=>[d(i)])),default:u((()=>[f("删除")])),_:1}),d(n,{type:"primary",status:"success",onClick:J},{icon:u((()=>[d(k)])),_:1})])),_:1}),d(j,{wrap:""},{default:u((()=>[d(N,{modelValue:p(V).status,"onUpdate:modelValue":a[1]||(a[1]=e=>p(V).status=e),class:"gi_select_input",placeholder:"请选择","allow-clear":""},{default:u((()=>[(r(!0),c(g,null,v(p(S),(e=>(r(),_(O,{key:e.value,value:e.value},{default:u((()=>[f(h(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),d(G,null,{default:u((()=>[d(W,{modelValue:p(V).name,"onUpdate:modelValue":a[2]||(a[2]=e=>p(V).name=e),placeholder:"请输入搜索关键词","allow-clear":""},null,8,["modelValue"]),d(n,{type:"primary",onClick:p(B)},{default:u((()=>[d($)])),_:1},8,["onClick"])])),_:1}),d(n,{type:"primary",onClick:p(B)},{icon:u((()=>[d(H)])),_:1},8,["onClick"])])),_:1})])),_:1}),m("section",M,[d(ee,{"row-key":"id",size:"small",loading:p(A),bordered:{cell:!0},data:p(R),scroll:{x:"100%",y:"100%",minWidth:1e3},"row-selection":{type:"checkbox",showCheckedAll:!0},pagination:p(K),onSelect:p(E),onSelectAll:p(I)},{columns:u((()=>[d(Q,{title:"序号",width:68},{cell:u((e=>[f(h(e.rowIndex+1),1)])),_:1}),d(Q,{title:"姓名","data-index":"name"}),d(Q,{title:"地址","data-index":"address",ellipsis:"",tooltip:""}),d(Q,{title:"比例",width:200},{cell:u((({record:e})=>{return[d(X,{status:(a=e.proportion,a<30?"danger":a<60?"warning":"success"),percent:e.proportion/100},null,8,["status","percent"])];var a})),_:1}),d(Q,{title:"状态",width:100,align:"center"},{cell:u((({record:e})=>[(r(!0),c(g,null,v(p(S),(a=>(r(),c(g,{key:a.value},[a.value===e.status?(r(),_(Y,{key:0,size:"small",color:a.color},{default:u((()=>[f(h(a.name),1)])),_:2},1032,["color"])):y("",!0)],64)))),128))])),_:1}),d(Q,{title:"创建时间","data-index":"createTime",width:180}),d(Q,{title:"操作",width:200,align:"center",fixed:p(x)()?void 0:"right"},{cell:u((({record:e})=>[d(j,null,{default:u((()=>[d(n,{type:"primary",size:"mini",onClick:a=>{return t=e,void(null==(l=P.value)||l.edit(t.id));var t,l}},{default:u((()=>[f("修改")])),_:2},1032,["onClick"]),d(n,{size:"mini",onClick:a=>{return t=e,void w.push({path:"/data/detail",query:{id:t.id}});var t}},{default:u((()=>[f("详情")])),_:2},1032,["onClick"]),d(Z,{type:"warning",content:"您确定要删除该项吗?",onBeforeOk:a=>{return q((()=>z({ids:[t.id]})),{content:`是否删除-${(t=e).name}?`,showModal:!1});var t}},{default:u((()=>[d(n,{type:"primary",status:"danger",size:"mini"},{default:u((()=>[f("删除")])),_:1})])),_:2},1032,["onBeforeOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["loading","data","pagination","onSelect","onSelectAll"])])])])),_:1})])),_:1})])),_:1}),d(b,{ref_key:"EditModalRef",ref:P},null,512)])}}}),[["__scopeId","data-v-da64c525"]]);export{V as default};
